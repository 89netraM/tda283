Submission format
=================

1. You prepare your submission by creating a new empty directory, subsequently
   called the `root` directory. In this directory you create three
   subdirectories: `doc`, `lib` and `src`.
2. The `root` directory must, after building as below, contain the executable
   compiler `jlc`. The compiler is used as follows:
    * For submission B and C, the command `jlc myFile.jl` produces the
      executable file `a.out`. Your code will generate a `myFile.ll`, which is
      stored in the *same directory* as the `.jl` source file. Then your
      compiler will call `llvm-as` and `llvm-link` to assemble and link.
    * Optionally, if you have chosen to implement a native code generator, the
      executable is `jlc_ARCH`, where `ARCH` is a CPU architecture such as x86.
      The command `jlc_ARCH myFile.jl` should produce an assembly file
      `myFile.s` and an executable file `a.out`.
    The compiler may be a shell script that calls files in `src`, or a symbolic
    link.
3. The subdirectory `src` must contain all necessary source code. In this
   directory, one should be able to build your compiler using `make`. Thus the
   directory contains:
    * The BNF Converter source file, if the tool has been used.
    * Alex/Lex/JLex and Happy/Yacc/Cup source files.
    * Program modules: abstract syntax, lexer, parser, type checker, code
      generator, top level program.
    * A `Makefile` for building the compiler from source. Note that the
      `Makefile` may also be located in the root directory. The `Makefile`
      should at least have these targets:
        * A default target (the one that is run when the command `make` is
          issued. This target should compile all source files in the compiler,
          and any runtime library files. It does not need to regenerate any
          source files generated by BNFC, or by any of the parser and lexer
          generators. After running `make` in the source directory, the compiler
          in the root directory should work without further actions from the
          user.
        * A `clean` target that removes all files produced during building.

    Note that `src` should **not** contain obsolete files, such as backup files,
    bitcode files or other unnecessary files.

3. In the `lib` directory you place the following files, as needed:
    * For submission B, you place here [`runtime.ll`](/files/runtime.ll) and
      have the `Makefile` generate `runtime.bc` from it; an LLVM bitcode file
      with the same functions. The file `runtime.ll` can be downloaded from the
      course website.
    * If you choose to do a native code generator for submission C, you place a
      file `runtime.c` here and have the `Makefile` generate the corresponding
      `runtime.o`.
4. The `doc` directory must contain one file in html, ps, plain ascii, or pdf
   format (proprietary formats not allowed), with the following content:
    * An explanation of how the compiler is used (what options, what output,
      etc)
    * A specification of the Javalette language (if produced by BNF converter,
      you may just refer to your BNFC source file).
    * A list of shift/reduce conficts in your parser, if you have such
      conflicts, and an analysis of them.
    * For submission C, an explicit list of extensions implemented.
    * If applicable, a list of features *not* implemented and the reason why.
5. If your compiler `jlc` is a shell script, you should also place this file
   here before building the tar ball.
6. When you have prepared everything, you create a compressed tar ball:

    ```
    > tar -czf partA-1.tar.gz doc lib src
    ```

    This produces the file `partA-1.tar.gz` that you upload to Fire.  We suggest
    the naming scheme `partX-Y.tar.gz` where X is A, B or C and Y is your
    version number (Y=1 the first time you submit, and if your submission is
    rejected and you must resubmit, the next has Y=2, etc).

    If you prefer, you may compress with `bzip2` instead of `gzip`.


Testing your submission
-----------------------

Your submission must be structured as specified in [the section on
testing](#testing). We suggest that, after having prepared your tarball, you
run

```
> runghc Grade.hs /tmp/partA-1.tar.gz
```

The grading program will extract the content extracting and build your compiler,
before running the test suite. This is how we test your submission, so you can
check that building succeeds before you submit. Don't forget to run the tester
with the apprioriate backend and extension flag for submissions B and C.
